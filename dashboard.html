<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>ALPHA SOLUÇÕES | Sistema</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>ALPHA SOLUÇÕES</h1>
  <button onclick="logout()">Sair</button>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</header>

<nav>
  <button onclick="showPage('home')">Dashboard</button>
  <button onclick="showPage('leads')">Leads</button>
  <button onclick="showPage('agendamentos')">Agendamentos</button>
  <button onclick="showPage('vendas')">Vendas</button>
  <button onclick="showPage('ranking')">Ranking</button>
  <button onclick="showPage('relatorio')">Relatório</button>
</nav>

<main>

  <section id="home" class="card page">
    <h2>Dashboard</h2>
    <p>Bem-vindo ao sistema ALPHA SOLUÇÕES</p>
  </section>

 <section id="leads" class="card page hidden">
  <h2>Cadastro de Leads</h2>

  <input id="leadNome" placeholder="Nome">
  <input id="leadTelefone" placeholder="Telefone">
  <input id="leadEmail" placeholder="Email">
  <input id="leadCPF" placeholder="CPF">
  <input id="leadOrigem" placeholder="Origem">
  <input id="leadStatus" placeholder="Status">
  <textarea id="leadObs" placeholder="Observações"></textarea>

  <button onclick="addLead()">Salvar Lead</button>

  <h3>Leads Cadastrados</h3>
  <ul id="listaLeads"></ul>
</section>
<script>
let agendamentos = JSON.parse(localStorage.getItem("agendamentos")) || [];

function addAgendamento() {
  const ag = {
    cliente: agCliente.value,
    data: agData.value,
    hora: agHora.value,
    tipo: agTipo.value,
    responsavel: agResp.value,
    obs: agObs.value
  };

  agendamentos.push(ag);
  localStorage.setItem("agendamentos", JSON.stringify(agendamentos));

  agCliente.value = "";
  agData.value = "";
  agHora.value = "";
  agTipo.value = "";
  agResp.value = "";
  agObs.value = "";

  renderAgendamentos();
}

function renderAgendamentos() {
  listaAgendamentos.innerHTML = "";
  agendamentos.forEach(a => {
    listaAgendamentos.innerHTML += `
      <li>
        <b>${a.cliente}</b><br>
        Data: ${a.data} às ${a.hora}<br>
        Tipo: ${a.tipo}<br>
        Resp: ${a.responsavel}
      </li>
    `;
  });
}

renderAgendamentos();
</script>


  <section id="agendamentos" class="card page hidden">
  <h2>Agendamentos</h2>

  <input id="agCliente" placeholder="Nome do Cliente">
  <input id="agData" type="date">
  <input id="agHora" type="time">
  <input id="agTipo" placeholder="Tipo (Ligação / Visita / Vídeo)">
  <input id="agResp" placeholder="Responsável">
  <textarea id="agObs" placeholder="Observações"></textarea>

  <button onclick="addAgendamento()">Salvar Agendamento</button>

  <h3>Agendamentos Cadastrados</h3>
  <ul id="listaAgendamentos"></ul>
</section

  <script>
let vendas = JSON.parse(localStorage.getItem("vendas")) || [];
let meta = Number(localStorage.getItem("meta")) || 0;

function addVenda() {
  const cliente = document.getElementById("vendCliente").value;
  const produto = document.getElementById("vendProduto").value;
  const valor = Number(document.getElementById("vendValor").value);
  const vendedor = document.getElementById("vendVendedor").value;

  if (!cliente || !valor || !vendedor) {
    alert("Preencha Cliente, Valor e Vendedor");
    return;
  }

  const venda = {
    cliente,
    produto,
    valor,
    vendedor,
    data: new Date().toLocaleDateString()
  };

  vendas.push(venda);
  localStorage.setItem("vendas", JSON.stringify(vendas));

  const metaInput = document.getElementById("metaValor");
  if (metaInput) {
    meta = Number(metaInput.value) || 0;
    localStorage.setItem("meta", meta);
  }

  document.getElementById("vendCliente").value = "";
  document.getElementById("vendProduto").value = "";
  document.getElementById("vendValor").value = "";
  document.getElementById("vendVendedor").value = "";

  renderVendas();
}

function renderVendas() {
  const total = vendas.reduce((s, v) => s + v.valor, 0);
  document.getElementById("totalVendido").innerText = total.toFixed(2);

  const percent = meta ? ((total / meta) * 100).toFixed(1) : 0;
  document.getElementById("percentMeta").innerText = percent + "%";

  const lista = document.getElementById("listaVendas");
  lista.innerHTML = "";

  vendas.forEach(v => {
    lista.innerHTML += `
      <li>
        <b>${v.cliente}</b><br>
        Produto: ${v.produto}<br>
        Vendedor: ${v.vendedor}<br>
        Valor: R$ ${v.valor.toFixed(2)}<br>
        Data: ${v.data}
      </li>
    `;
  });

  if (typeof renderRanking === "function") {
    renderRanking();
  }
}

function carregarMeta() {
  const metaInput = document.getElementById("metaValor");
  if (metaInput) {
    metaInput.value = meta;
  }
}

carregarMeta();
renderVendas();
</script>



  <section id="vendas" class="card page hidden">
  <h2>Cadastro de Vendas</h2>

  <label>Meta Mensal (R$)</label>
  <input id="metaValor" type="number" placeholder="Ex: 300000">

  <label>Cliente</label>
  <input id="vendCliente" placeholder="Nome do Cliente">

  <label>Produto / Plano</label>
  <input id="vendProduto" placeholder="Produto ou Plano">

  <label>Valor da Venda (R$)</label>
  <input id="vendValor" type="number">

  <label>Vendedor</label>
  <input id="vendVendedor" placeholder="Nome do Vendedor">

  <button onclick="addVenda()">Registrar Venda</button>

  <h3>Resumo</h3>
  <p>Total Vendido: <b>R$ <span id="totalVendido">0</span></b></p>
  <p>% da Meta: <b><span id="percentMeta">0%</span></b></p>

  <h3>Vendas Registradas</h3>
  <ul id="listaVendas"></ul>
</section>


 <section id="ranking" class="card page hidden">
  <h2>Ranking de Vendas</h2>

  <ul id="listaRanking"></ul>

  <canvas id="graficoRanking" height="120"></canvas>
</section>
<script>
let chartRanking;

function renderRanking() {
  const resumo = {};

  vendas.forEach(v => {
    resumo[v.vendedor] = (resumo[v.vendedor] || 0) + v.valor;
  });

  const ordenado = Object.entries(resumo)
    .sort((a, b) => b[1] - a[1]);

  listaRanking.innerHTML = "";

  ordenado.forEach((r, i) => {
    const perc = meta ? ((r[1] / meta) * 100).toFixed(1) : 0;
    listaRanking.innerHTML += `
      <li>
        <b>${i + 1}º ${r[0]}</b><br>
        Total: R$ ${r[1].toFixed(2)}<br>
        % da Meta: ${perc}%
      </li>
    `;
  });

  renderGrafico(ordenado);
}

function renderGrafico(dados) {
  const labels = dados.map(d => d[0]);
  const valores = dados.map(d => d[1]);

  if (chartRanking) chartRanking.destroy();

  chartRanking = new Chart(graficoRanking, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        data: valores,
        backgroundColor: '#ff9900'
      }]
    },
    options: {
      plugins: {
        legend: { display: false }
      },
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
}
</script>


  <section id="relatorio" class="card page hidden">
    <h2>Relatório</h2>
    <p>Módulo de relatório PDF</p>
  </section>

</main>

<footer>
  Desenvolvido por <b>elbs_</b>
</footer>

<script>
const user = JSON.parse(localStorage.getItem("logged"));
if (!user) location.href = "index.html";

function logout() {
  localStorage.removeItem("logged");
  location.href = "index.html";
}

function showPage(id) {
  document.querySelectorAll(".page").forEach(p => {
    p.classList.add("hidden");
  });

  document.getElementById(id).classList.remove("hidden");
}
</script>
<script>
let leads = JSON.parse(localStorage.getItem("leads")) || [];

function addLead() {
  const lead = {
    nome: leadNome.value,
    telefone: leadTelefone.value,
    email: leadEmail.value,
    cpf: leadCPF.value,
    origem: leadOrigem.value,
    status: leadStatus.value,
    obs: leadObs.value
  };

  leads.push(lead);
  localStorage.setItem("leads", JSON.stringify(leads));

  leadNome.value = "";
  leadTelefone.value = "";
  leadEmail.value = "";
  leadCPF.value = "";
  leadOrigem.value = "";
  leadStatus.value = "";
  leadObs.value = "";

  renderLeads();
}

function renderLeads() {
  listaLeads.innerHTML = "";
  leads.forEach((l, i) => {
    listaLeads.innerHTML += `
      <li>
        <b>${l.nome}</b><br>
        Tel: ${l.telefone}<br>
        Email: ${l.email}<br>
        Status: ${l.status}
      </li>
    `;
  });
}

renderLeads();
</script>

  <script>
/* ================= LOGIN ================= */
const user = JSON.parse(localStorage.getItem("logged"));
if (!user) location.href = "index.html";

function logout() {
  localStorage.removeItem("logged");
  location.href = "index.html";
}

function showPage(id) {
  document.querySelectorAll(".page").forEach(p => p.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ================= LEADS ================= */
let leads = JSON.parse(localStorage.getItem("leads")) || [];

function addLead() {
  leads.push({
    nome: leadNome.value,
    telefone: leadTelefone.value,
    email: leadEmail.value,
    cpf: leadCPF.value,
    origem: leadOrigem.value,
    status: leadStatus.value,
    obs: leadObs.value
  });
  localStorage.setItem("leads", JSON.stringify(leads));
  renderLeads();
}

function renderLeads() {
  listaLeads.innerHTML = "";
  leads.forEach(l => {
    listaLeads.innerHTML += `<li><b>${l.nome}</b> - ${l.telefone}</li>`;
  });
}
renderLeads();

/* ================= AGENDAMENTOS ================= */
let agendamentos = JSON.parse(localStorage.getItem("agendamentos")) || [];

function addAgendamento() {
  agendamentos.push({
    cliente: agCliente.value,
    data: agData.value,
    hora: agHora.value,
    tipo: agTipo.value,
    resp: agResp.value,
    obs: agObs.value
  });
  localStorage.setItem("agendamentos", JSON.stringify(agendamentos));
  renderAgendamentos();
}

function renderAgendamentos() {
  listaAgendamentos.innerHTML = "";
  agendamentos.forEach(a => {
    listaAgendamentos.innerHTML += `<li><b>${a.cliente}</b> - ${a.data}</li>`;
  });
}
renderAgendamentos();

/* ================= VENDAS ================= */
let vendas = JSON.parse(localStorage.getItem("vendas")) || [];
let meta = Number(localStorage.getItem("meta")) || 0;

function addVenda() {
  const venda = {
    cliente: vendCliente.value,
    produto: vendProduto.value,
    valor: Number(vendValor.value),
    vendedor: vendVendedor.value,
    data: new Date().toLocaleDateString()
  };

  if (!venda.cliente || !venda.valor || !venda.vendedor) {
    alert("Preencha Cliente, Valor e Vendedor");
    return;
  }

  vendas.push(venda);
  localStorage.setItem("vendas", JSON.stringify(vendas));

  meta = Number(metaValor.value) || 0;
  localStorage.setItem("meta", meta);

  vendCliente.value = "";
  vendProduto.value = "";
  vendValor.value = "";
  vendVendedor.value = "";

  renderVendas();
}

function renderVendas() {
  const total = vendas.reduce((s, v) => s + v.valor, 0);
  totalVendido.innerText = total.toFixed(2);

  const percent = meta ? ((total / meta) * 100).toFixed(1) : 0;
  percentMeta.innerText = percent + "%";

  listaVendas.innerHTML = "";
  vendas.forEach(v => {
    listaVendas.innerHTML += `
      <li>
        <b>${v.cliente}</b> - R$ ${v.valor.toFixed(2)}<br>
        Vendedor: ${v.vendedor}
      </li>`;
  });

  renderRanking();
}

metaValor.value = meta;
renderVendas();

/* ================= RANKING ================= */
function renderRanking() {
  const resumo = {};
  vendas.forEach(v => {
    resumo[v.vendedor] = (resumo[v.vendedor] || 0) + v.valor;
  });

  listaRanking.innerHTML = "";
  Object.entries(resumo)
    .sort((a, b) => b[1] - a[1])
    .forEach((r, i) => {
      listaRanking.innerHTML += `
        <li>${i + 1}º ${r[0]} - R$ ${r[1].toFixed(2)}</li>`;
    });
}
</script>

</body>
</html>

